- additional_stylesheet 'events'

- if current_user.admin? || current_user.advertiser?
  = render "registering_events"
.index
  .d-flex.justify-content-between.align-items-center.mb-3
    %h1 Events

    = link_to new_outing_path, class: 'btn btn-outline-secondary ms-auto' do
      create outing
      %i.bi-plus



  = simple_form_for :search, url: events_search_path, method: :get, remote: true do |f|
    .search-form
      = f.input :query, placeholder: 'search for events...', label: false, required: false, input_html: {name: 'query', value: @query || '' }, wrapper_html: { class: 'd-flex flex-col align-items-center' }

      %button.btn.btn-outline-secondary{:type => "submit", :value => 'Search'}
        %i.bi-search

  #searched-events
    = render "searched_events", events: @searched_events

  - if current_user.commercial

    .card.card-primary.mb-3#category_promo
      .card-header
        %h1
          Tell us about yourself
        .icon-display
          .icon
            🎬
          .icon
            ⚽
          .icon
            🍸
          .filter-icons

      .card-footer
        = link_to category_interests_path, class: 'd-flex justify-content-end align-items-center' do
          pick your favourite event categories here
          %i.bi-arrow-right-short
  #events
    - if @events.empty?
      %h1 Hmm...
      %p There doesn't seem to be any events yet
      %p come back later and they'll be more for you!

    - if user_signed_in?

      - if !(@nearby_events.nil?) && !@nearby_events.empty?
        .mb-3
          %h2
            Near you
          #events-display
            - @nearby_events.each do |event|
              = render "event_card", event: event


      - if defined?(@favourite_category)
        .mb-3
          %h2
            Because you like...
          %h3
            = @favourite_category.decorate

          .horizontal-scroll
            - @recommended_events.each do |event|

              = render "event_card", event: event
