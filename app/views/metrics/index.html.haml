.card
  .card-header
    %span General Metrics
  .card-body
    %div{:class=>"flex_container"}
      -@all_metrics.each do |metric|
        = render 'page_metrics', route_name: metric["route"], metrics: metric["metrics"]
  .card-header 
    %span Special Metrics
  .card-body
    .card-header{:class=>"clickable", :onclick=>'document.getElementById("pageSelected").value = "/";document.getElementById("metricSelected").value = "Total number of landing page visits";'}
      %span="Total number of landing page visits: "+@number_landing_page_visits 
    .card-header{:class=>"clickable", :onclick=>'document.getElementById("pageSelected").value = "/pricings";document.getElementById("metricSelected").value = "Pricing page bounce outs";'}
      %span="Pricing page bounce outs: "+@number_pricing_page_bounce_outs
    .card-header{:class=>"clickable", :onclick=>'document.getElementById("pageSelected").value = "/pricings";document.getElementById("metricSelected").value = "Interest in pricing options Basic:Premium:Premium+ Total";'}
      %span="Interest in pricing options Basic:Premium:Premium+ Total "+@interest_in_pricing_options
    .card-header{:class=>"clickable", :onclick=>'document.getElementById("pageSelected").value = "/pricings";document.getElementById("metricSelected").value = "Interest in pricing options Basic:Premium:Premium+ Percent";'}
      %span="Interest in pricing options Basic:Premium:Premium+ Percent "+@interest_in_pricing_options_percent
  .card-header 
    %span Graphs 
  .card-body
    .card-body
      %form{:class=>"graph_form",:"accept-charset"=>"UTF-8", :action=>"/metrics", :method=>"get"}
        %div
          %label{:for=>"start"} Start
          %input{:type=>"date", :name=>"start", :id=>"start", :value=>params["start"]}
        %div
          %label{:for=>"end"} End
          %input{:type=>"date", :name=>"end", :id=>"end", :value=>params["end"]}
        %div
          %label{:for=>"resolution"} Resolution
          %select{:name=>"resolution", :value=>params["resolution"]}
            %option{:value=>"Day"} Day
            %option{:value=>"Month"} Month
            %option{:value=>"Year"} Year
        %div
          %label{:for=>"page"} Page
          %input{:name=>"page", :readonly=>"true", :value=>"/", :id=>"pageSelected", :value=>params["pageSelected"]}
        %div
          %label{:for=>"metric"} Metric
          %input{:name=>"metric", :readonly=>"true", :value=>"", :id=>"metricSelected", :value=>params["metricSelected"]}
        %div
          %button{:type=>"submit"}Update Graph
    %canvas{:id=>"myChart", :data=>{:labels=> @data_keys, :data=> @data_values}}
  .card-header 
    %span Visit Locations
  .card-body
    %div{:id=>"world-map", data: {value: @click_data}}
    :javascript
      $(function(){
        click_data = $('#world-map').data("value");
        $('#world-map').vectorMap({map: 'world_merc',
          series: {
            regions: [{
              values: click_data,
              scale: ['#C8EEFF', '#0071A4'],
              normalizeFunction: 'polynomial'
            }]
          },
          zoomOnScroll: false,
          onRegionTipShow: function(e, el, code){
            el.html(el.html()+' (Visits - '+(click_data[code] ? click_data[code] : 0)+')');
          }
        });
      });