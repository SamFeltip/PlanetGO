= render 'outing_header', outing: @outing, nav: true

#outing-body.pt-3
  #content-who-and-when{:class => (!(params[:position] == 'where') || params[:position].nil?) ?  'd-flex' : 'd-none'}
    #content-who{:class => ((params[:position] == 'who')  || params[:position].nil?) ?  'd-lg-block' : 'd-none d-lg-block'}
      %p.grey #{@outing.participants.count} people interested

      = form_tag users_path, id: 'friend-search-form', method: :get do
        = text_field_tag :search

        %button.btn.btn-outline-secondary{:type => "submit"}
          %i.bi-search

      #outing-share
        Share to...
        .dropdown.me-0
          %a.btn.btn-outline-primary.dropdown-toggle{:href => "#", "role" => "button", "data-bs-toggle" => "dropdown", "data-target" => "#"}
            %i.bi-share
            %b.caret
          %ol.lg-icon.dropdown-menu.p-3.ms-2.text-center{"role" => "menu"}
            %li
              %a{:href => "#link1"}
                %i.bi-link
            %li
              %a{:href => "#link1"}
                %i.bi-instagram
            %li
              %a{:href => "#link2"}
                %i.bi-facebook
            %li
              %a{:href => "#link3"}
                %i.bi-twitter
            %li

      #participant-cards
        - @outing.participants.each do |participant|
          = render 'outings/participant_card', participant: participant

      %hr

      = form_tag send_invites_outing_path(@outing), method: :post, remote: true do
        = submit_tag 'Send Invites', class: 'btn btn-primary', id: 'send-invite-button'
        #not_invited_friends
          - current_user.not_invited_friends(@outing).each do |friend|
            = render 'invite_friend', friend: friend

    #content-when{:class => ((params[:position] == 'when')) ? 'd-lg-block' : 'd-none d-lg-block'}
      %p
        When
      .d-lg-flex.justify-content-end.d-none
        %a.btn.btn-primary#set-events{:href => set_details_outing_path(@outing, position: 'where')}
          Set Events

  #content-where.flex-lg-row.flex-column{:class => params[:position] == 'where' ? 'd-flex' : 'd-none'}
    #where-sidebar

      = form_tag events_path, id: 'event-search-form', class: 'mb-2', method: :get do
        = text_field_tag :search

        %button.btn.btn-outline-secondary{:type => "submit"}
          %i.bi-search

      #event-cards
        = render 'events/recommended_events'

    #where-body
      %h2
        Timetable
      #where-timetable
        = render 'outings/where_timetable'
      %h2
        What about after?


      .horizontal-scroll.justify-content-center
        - current_user.final_events.each do |event|
          = render 'events/event_card_small', event: event, render_params: { add_event_to_outing: true }, outing: @outing

%footer#outing-footer
  -# contains 3 links, 'back', 'done', 'next'
  .flex_container.justify-content-around
    #outing-footer-prev
      %i#prev-chevron.bi-chevron-left
      Prev

    = link_to 'Done', outing_path(@outing), id: 'outing-footer-done'

    #outing-footer-next
      Next
      %i#next-chevron.bi-chevron-right
